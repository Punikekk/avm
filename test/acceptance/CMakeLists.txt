add_custom_target(test_acceptance)
add_dependencies(test_acceptance avm)

set(AS3_BASEDIR ${CMAKE_CURRENT_LIST_DIR})
set(AS3_INCLUDE Assert.as Utils.as)
set(AS3_TARGET test_acceptance)

include(as3_add_test.cmake)
include(as3_find_tests.cmake)

as3_ignore(as3/asc/import-with-float4-helper.as)

as3_set_arguments(as3/Array/regress_524122.as USES_SWF_VERSIONS)
as3_set_arguments(as3/AMF/AMFSerializer_float.as FLOAT)
as3_set_arguments(as3/asc/*.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL)
as3_set_arguments(as3/asc/*float*.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL FLOAT)
as3_set_arguments(as3/asc/compare-with-inference.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL FLOAT)
as3_set_arguments(as3/asc/undefined-as-default-value.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL FLOAT)
as3_set_arguments(as3/ByteArray/*.as SHELL)
as3_set_arguments(as3/DescribeType/*.as ASC_ARGUMENTS -AS3 -optimize -md)
as3_set_arguments(as3/GlobalObject/parseFloat_513018.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Expressions/logicalAssignment2.as SHELL)
as3_set_arguments(as3/RuntimeErrors/Error1115NotAConstructor.as USES_SWF_VERSIONS)
as3_set_arguments(as3/sampling/*.as ASC_ARGUMENTS -AS3 SHELL)
as3_set_arguments(as3/ShellClasses/*.as ASC_ARGUMENTS -AS3 SHELL)
as3_set_arguments(as3/String/localeCompare_585791.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Types/Number/e15_7_4_6_1.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Types/Number/visibility.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Types/Float/*.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL FLOAT)
as3_set_arguments(as3/Types/Float/nostrict/*.as ASC_ARGUMENTS -AS3 -optimize SHELL FLOAT)
as3_set_arguments(as3/Types/Float4/*.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL FLOAT)
as3_set_arguments(as3/Types/Float4/nostrict/*.as ASC_ARGUMENTS -AS3 -optimize SHELL FLOAT)
as3_set_arguments(as3/Vector/bug504525/bug504525.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Vector/nonindexproperty.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Vector/vectorIndexRangeExceptions.as USES_SWF_VERSIONS)
as3_set_arguments(as3/Workers/*.as ASC_ARGUMENTS -AS3 SHELL)
as3_set_arguments(as3/asc/import-with-float4-main.as SOURCES as3/asc/import-with-float4-helper.as ASC_ARGUMENTS -AS3 -strict -optimize SHELL FLOAT)
as3_set_arguments(e4x/XML/e13_4_4_3.as USES_SWF_VERSIONS)
as3_set_arguments(e4x/XML/e13_4_4_29.as USES_SWF_VERSIONS)
as3_set_arguments(e4x/XML/e13_4_4_32.as USES_SWF_VERSIONS)
as3_set_arguments(ecma3/JSON/AS3Types.as ASC_ARGUMENTS -AS3 -optimize -md SHELL)
as3_set_arguments(ecma3/JSON/Classes.as ASC_ARGUMENTS -AS3 -optimize -md SHELL)
as3_set_arguments(ecma3/JSON/versioned.as AVM_ARGUMENTS -api SWF_12 ecma3/JSON/versioned_defjson_helper.abc_bin ecma3/JSON/versioned_useoldjson_helper.abc_bin)
as3_set_arguments(ecma3/Exceptions/exception_011_rt.as WILL_FAIL)
as3_set_arguments(misc/bug_526662.as USES_SWF_VERSIONS)
as3_set_arguments(misc/abstract-base-class.as SHELL)
as3_set_arguments(misc/invalid_opcodes.as SHELL)
as3_set_arguments(misc/catchableTimeout.as AVM_ARGUMENTS -Dtimeout)
as3_set_arguments(misc/doubleTimeout.as AVM_ARGUMENTS -Dtimeout WILL_FAIL)
as3_set_arguments(misc/testJitordieSwitch.as AVM_ARGUMENTS -Djitordie PASS_REGULAR_EXPRESSION "JIT failed")
as3_set_arguments(mmgc/memlimit.as AVM_ARGUMENTS -memlimit 10240)
as3_set_arguments(mmgc/memstats.as AVM_ARGUMENTS -memstat)
as3_set_arguments(mmgc/outofmemory.as AVM_ARGUMENTS -memlimit 1024 WILL_FAIL)
as3_set_arguments(mops/*.as ASC_ARGUMENTS -AS3 -optimize -import as3_find_testsd/intrinsics.abc_ AVM_ARGUMENTS as3_find_testsd/intrinsics.abc_)
as3_set_arguments(regress/bug_515935.as WILL_FAIL)
as3_set_arguments(regress/security/bug567284.as TEST_ARGUMENTS regress/security/bug567284_support/ SHELL)
as3_set_arguments(regress/security/bug_441280.as SHELL)
as3_set_arguments(regress/vector_domain_bug.as ASC_ARGUMENTS -AS3 SHELL)
as3_set_arguments(regress/bug_551587_2.as USES_SWF_VERSIONS)
as3_set_arguments(regress/bug_558863.as USES_SWF_VERSIONS)
as3_set_arguments(regress/bug_609416.as USES_SWF_VERSIONS)
as3_set_arguments(regress/bug_654807.as USES_SWF_VERSIONS)
as3_set_arguments(regress/bug_618215.as TEST_ARGUMENTS regress/bug_618215_support/f-patched.abc_)
as3_set_arguments(versioning/bugcompat.as TEST_ARGUMENTS versioning/bugcompat_support/bugcompat_leaf.abc versioning/bugcompat_support/bugcompat_test.abc)
as3_set_arguments(versioning/classes.as API_VERSIONS AIR_1_0 FP_10_0 AIR_1_5 AIR_1_5_1 FP_10_0_32 AIR_1_5_2)
as3_set_arguments(versioning/globals.as API_VERSIONS AIR_1_0 FP_10_0 AIR_1_5 AIR_1_5_1 FP_10_0_32 AIR_1_5_2)

as3_find_tests(as3/*)
as3_find_tests(as3/Definitions/Classes/*)
as3_find_tests(as3/Definitions/*)
as3_find_tests(as3/Expressions/*)
as3_find_tests(as3/Statements/*)
as3_find_tests(as3/Types/*)
as3_find_tests(as3/Vector/bug504525)
as3_find_tests(as3/Workers/regress)
as3_find_tests(e4x/*)
as3_find_tests(ecma3/*)
as3_find_tests(misc)
as3_find_tests(mmgc)
as3_find_tests(mops)
as3_find_tests(recursion)
as3_find_tests(regress)
as3_find_tests(regress/security)
as3_find_tests(versioning)
